UTest({
	'component with binded model and a slot' () {
		var template = `
			define foo {
				slot change () {
					this.model.name = 'bar'
				}
				function onRenderStart() {
					this.model = { name: 'foo' };
				}
				span > '~[bind: name]'
				button x-tap='change' > 'Change'
			}
			
			foo;
		`;
		var model = {
			numbers: [2, 3, 4]
		}
		return $render(template, { model }).pipe(el => {
			
			return UTest.domtest(el, `
				find('span') > text foo;
				find('button') > do click;
				find('span') > text bar;
			`)
		});
	}
})